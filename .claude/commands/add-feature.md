---
description: 新機能を既存パターンに従って、完全に無停止で実装する (planとimplementのラッパー)
argument-hint: 機能名 または GitHub issue URL
---

# 新機能の追加 (完全自動実行モード)

**このコマンドは、`/plan` と `/implement` を順番に実行するラッパーコマンドです。**

**引数:** 機能名 または GitHub issue URL (例: `/add-feature ユーザープロフィール編集` または `/add-feature https://github.com/owner/repo/issues/123`)

**重要:** このワークフローは、ユーザーの介入なしに、開始から完了まで完全に自動で実行されるように設計されています。各ステップは完了後、ただちに次のステップへ移行してください。

---

## ステップ1: 計画フェーズ (/plan の実行)

1. **引数を解析:**
   - GitHub issue URL または機能名を識別

2. **`/plan` コマンドを実行:**
   - 引数をそのまま `/plan` に渡す
   - `/plan` は以下を実行:
     - issue URL の場合は内容を取得
     - ステアリングディレクトリを作成
     - プロジェクト理解と既存パターン調査
     - ステアリングファイル (requirements.md, design.md, tasklist.md) を生成

3. **ステアリングディレクトリパスを取得:**
   - `/plan` が作成したステアリングディレクトリのパスを特定
   - パターン: `.steering/[日付]-[機能名]/`

4. **このステップが正常に完了したら、決して停止せず、ただちにステップ2に進むこと。**

## ステップ2: 実装フェーズ (/implement の実行)

1. **`/implement` コマンドを実行:**
   - ステップ1で取得したステアリングディレクトリパスを引数として渡す
   - `/implement` は以下を実行:
     - TDD サイクル (RED → GREEN → REFACTOR) で実装
     - 実装検証 (implementation-validator サブエージェント)
     - 自動テスト実行 (pytest, ruff, mypy)
     - 振り返りとドキュメント更新

2. **このステップが正常に完了したら、完了とする。**

## 完了条件

このワークフローは、以下の全ての条件を満たした時点で自動的に完了となる:
- ステップ1: `/plan` が正常に完了し、ステアリングファイルが作成されている
- ステップ2: `/implement` が正常に完了し、以下が全てパスしている:
  - `tasklist.md` の全てのタスクが完了状態
  - `implementation-validator` サブエージェントの検証をパス
  - `pytest`, `ruff`, `mypy` の全てのコマンドがエラーなく成功
  - `tasklist.md` に申し送り事項が記載されている

---

## 注意事項

- このコマンドは `/plan` と `/implement` のラッパーです
- 各コマンドの詳細な動作は、それぞれのコマンドファイルを参照してください
- 要件が不明確な場合でも、`/plan` が対話的に確認するため、このコマンドをそのまま実行できます
- 後方互換性のため、既存の動作を維持しています

## 使い分け

- **`/add-feature`**: 計画から実装まで一気に完了させたい場合 (このコマンド)
- **`/plan`**: まず計画だけを立てたい場合、要件を確認したい場合
- **`/implement`**: 既にステアリングファイルがあり、実装だけを行いたい場合
