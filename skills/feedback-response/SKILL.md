---
name: feedback-response
description: 実装中または実装後のユーザーフィードバックに迅速かつ構造的に対応するスキル。微調整依頼時に使用。
allowed-tools: Read, Write, Edit
---

# Feedback Response スキル

## 目的

実装中または実装後のユーザーフィードバックに迅速かつ構造的に対応する

## 使用タイミング

以下の場合に、このスキルを使用してください:

- 実装完了後にユーザーからフィードバックを受けた時
- UI/UXに関する調整依頼を受けた時
- 「ここをもう少し〜」という微調整依頼を受けた時
- 実装中に「やっぱりこうしたい」という変更依頼を受けた時

## 実行フロー

### ステップ1: フィードバックの分類

ユーザーからのフィードバックを以下の3つに分類する:

1. **バグ**: 既存の機能が正しく動作していない
   - 対応: 即座に修正（このスキルの範囲外、通常の修正フローで対応）

2. **微調整**: 見た目や表現の調整
   - 対応: 現在のステアリングファイルに追加フェーズとして計画・実装（このスキルの範囲内）

3. **新機能**: 新しい要求
   - 対応: 別の `/plan` で対応（このスキルの範囲外）

**判定基準**:

- **微調整に該当する例**:
  - HTMLタグの変更（`<ol>` → リスト形式の変更など）
  - テキスト表現の変更（サブタイトルの文言調整など）
  - スペーシングやレイアウトの調整
  - 既存機能の軽微な動作変更（1〜2時間で完了する変更）

- **新機能に該当する例**:
  - 新しいフィールドやデータモデルの追加
  - 新しいAPIエンドポイントの追加
  - 大規模なアーキテクチャ変更

### ステップ2: 現在のステアリングファイルの確認

1. **最新のステアリングディレクトリを特定**:
   ```bash
   ls -t .steering/ | head -1
   ```

2. **tasklist.mdを読み込む**:
   - 現在のフェーズ番号を確認
   - 最後のフェーズ番号 + 1 を次のフェーズ番号とする

3. **フィードバック内容を整理**:
   - 何を変更するのか
   - なぜ変更するのか（ユーザーのフィードバック内容）
   - どう変更するのか（技術的なアプローチ）

### ステップ3: 追加フェーズの計画

現在のステアリングファイルの `tasklist.md` に追加フェーズを記録:

```markdown
## フェーズX: [フィードバック内容の要約]（ユーザーフィードバック対応）

### 背景
ユーザーからのフィードバック:
- [具体的なフィードバック内容を引用]

### TDDサイクル: RED（テスト追加）

- [ ] [変更対象ファイル]のテストを追加
  - [ ] [期待される動作の検証テスト]

### TDDサイクル: GREEN（実装）

- [ ] [変更対象ファイル]を修正
  - [ ] [具体的な変更内容1]
  - [ ] [具体的な変更内容2]

### TDDサイクル: REFACTOR（リファクタリング）

- [ ] コードの可読性を確認
  - [ ] 重複コードの確認
  - [ ] コメントの適切性確認

### 品質チェック

- [ ] すべてのテストが通ることを確認
  - [ ] `.venv/bin/pytest tests/ -v`
- [ ] リントエラーがないことを確認
  - [ ] `.venv/bin/ruff check src/`
- [ ] コードフォーマットを適用
  - [ ] `.venv/bin/ruff format src/`
- [ ] 型エラーがないことを確認
  - [ ] `.venv/bin/mypy src/`
```

**重要**:
- フェーズタイトルに「（ユーザーフィードバック対応）」を必ず含める
- 背景セクションでユーザーのフィードバック内容を引用する
- TDDサイクル（RED → GREEN → REFACTOR）を必ず含める

### ステップ4: TDDサイクルで実装

通常の実装と同じTDDサイクルで実装:

1. **RED**: 失敗するテストを先に書く
   - 変更後の期待される動作を検証するテストを追加
   - テストを実行して失敗を確認

2. **GREEN**: 最小限の実装でテストをパスさせる
   - ユーザーのフィードバックに対応する変更を実装
   - テストを実行してパスを確認

3. **REFACTOR**: コードの可読性を確認
   - 重複コードの排除
   - コメントの適切性確認
   - テストを再実行して全てパスすることを確認

### ステップ5: tasklist.mdの更新

実装完了後、以下を更新:

1. **各タスクを `[x]` にマーク**:
   - 完了したタスクを順次マーク

2. **振り返りセクションに追記**:
   ```markdown
   **計画と異なった点**:
   - **ユーザーフィードバックにより、フェーズXが追加された**:
     - フェーズX: [フィードバック内容の要約]
   ```

### ステップ6: 完了報告

ユーザーに以下を報告:

```
✅ フィードバックへの対応が完了しました。

### 対応内容
- フェーズX: [フィードバック内容の要約]
- 変更ファイル: [ファイル名]

### 品質チェック
- ✅ pytest: 全てパス
- ✅ ruff check: All checks passed
- ✅ ruff format: フォーマット適用済み
- ✅ mypy: Success

ステアリングファイルに追加フェーズとして記録しました:
`.steering/[ディレクトリ名]/tasklist.md`
```

## 使用例

### 例1: HTMLタグの変更

**ユーザーのフィードバック**:
「メール本文の番号付きリストが見づらいです。`<ol>`タグを削除して、シンプルな表示にしてください。」

**対応**:
1. フィードバックの分類: **微調整**
2. tasklist.mdに追加フェーズを記録（フェーズ6）
3. TDDサイクルで実装:
   - RED: `<ol>`, `<li>`が含まれないことを検証するテストを追加
   - GREEN: `<ol>`, `<li>`タグを削除し、記事間に`<br/><br/>`を追加
   - REFACTOR: コードの可読性を確認
4. tasklist.mdを更新
5. 完了報告

### 例2: テキスト表現の変更

**ユーザーのフィードバック**:
「THINKセクションのサブタイトル『設計判断に役立つ記事』を『技術判断に役立つ記事』に変更してください。」

**対応**:
1. フィードバックの分類: **微調整**
2. tasklist.mdに追加フェーズを記録（フェーズ7）
3. TDDサイクルで実装:
   - RED: 新しいサブタイトルが含まれることを検証するテストを追加
   - GREEN: サブタイトルのテキストを変更
   - REFACTOR: コードの可読性を確認
4. tasklist.mdを更新
5. 完了報告

## 実践例（過去のステアリングファイルから）

**実例**: `.steering/20260215-メールの体裁変更/tasklist.md`

- フェーズ6: `<ol>`, `<li>`タグの削除と記事間スペース追加
- フェーズ7: セクションタイトル後のスペース追加とTHINKセクションのサブタイトル変更

これらは両方とも、実装完了後のユーザーフィードバックに対応した追加フェーズです。

## 効果

このスキルを使用すると:

- ✅ ユーザーフィードバックへの対応が構造化される
- ✅ 追加変更も品質が担保される（TDDサイクル）
- ✅ ステアリングファイルに履歴が残る
- ✅ 同じTDDサイクルで実装できる
- ✅ 各フィードバックに対して、REDからスタートすることで、期待値が明確になる

## 注意事項

- **このスキルは微調整のみに使用すること**
  - 新機能は別の `/plan` で対応
  - バグは即座に修正（通常の修正フロー）

- **TDDサイクルを必ず守ること**
  - RED → GREEN → REFACTOR の順で実装
  - テストを先に書くことで、期待値を明確化

- **振り返りセクションに必ず記録すること**
  - 「計画と異なった点」にユーザーフィードバックを記録
  - 次回への改善提案に反映

- **複数のフィードバックがある場合**
  - 1つずつフェーズとして追加
  - 優先度の高いものから順番に対応
  - 各フェーズごとにTDDサイクルを完了させる
